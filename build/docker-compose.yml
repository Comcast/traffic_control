---

# Build configuration for traffic_control
version: '2'

volumes:
  repo:

services:
  clone:
    build:
      dockerfile: Dockerfile-clone
      context: .
    environment:
      - GITREPO
      - BRANCH
    volumes:
      - repo:/repo

  traffic_ops_build:
    depends_on: [ clone ]
    build:
      dockerfile: Dockerfile-traffic_ops
      context: .
    environment:
      - GITREPO
      - BRANCH
    volumes:
      - repo:/repo
      - ./artifacts:/artifacts
