FROM centos:7

MAINTAINER Dan Kirkwood

RUN	yum -y install \
		epel-release \
		git \
		rpm-build && \
	yum -y clean all

ENV GITREPO https://github.com/Comcast/traffic_control
ENV BRANCH master

WORKDIR /repo
RUN echo $'\n\
echo GITREPO=${GITREPO:=https://github.com/Comcast/traffic_control}\n\
echo BRANCH=${BRANCH:=master}\n\
git clone $GITREPO -b $BRANCH traffic_control && touch clone-finished\n\
' >run.sh

CMD sh -x /repo/run.sh

# vi:syntax=Dockerfile
